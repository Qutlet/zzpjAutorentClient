{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\macie\\\\Desktop\\\\zzpjAutorentClient\\\\src\\\\components\\\\LoginForm.js\";\nimport React, { Component } from 'react';\nimport InputField from './InputField';\nimport SubmitButton from './SubmitButton';\nimport UserStore from './Stores/UserStore';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nexport class LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      password: '',\n      buttonDisabled: false,\n      error: ''\n    };\n  }\n\n  setInputValue(property, val) {\n    val = val.trim();\n\n    if (val.lenght > 12) {\n      return;\n    }\n\n    this.setState({\n      [property]: val\n    });\n  }\n\n  resetForm() {\n    this.setState({\n      name: '',\n      password: '',\n      buttonDisabled: false\n    });\n  }\n\n  async doLogin() {\n    if (!this.state.name) {\n      return;\n    }\n\n    if (!this.state.password) {\n      return;\n    }\n\n    this.setState({\n      buttonDisabled: true\n    });\n    axios.post('https://autorentserver.azurewebsites.net/api/auth/sign-in', {\n      name: this.state.name,\n      password: this.state.password\n    }).then(response => {\n      UserStore.login(response.data.permission_level, response.data.token);\n      this.props.history.push('/');\n      alert('Zalogowano pomyślnie!');\n    }).catch(function (error) {\n      console.log(error.message);\n      alert('Nie udało się zalogować.');\n    });\n    this.resetForm();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loginForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-label\",\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          type: \"text\",\n          placeholder: \"Username\",\n          value: this.state.name ? this.state.name : '',\n          onChange: val => this.setInputValue('name', val)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          type: \"password\",\n          placeholder: \"Haslo\",\n          value: this.state.password ? this.state.password : '',\n          onChange: val => this.setInputValue('password', val)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n          text: 'Zaloguj sie',\n          disabled: this.state.buttonDisabled,\n          onClick: () => this.doLogin()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          className: \"nav-link\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-swap\",\n            children: \"Nie posiadam konta.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport default LoginForm;","map":{"version":3,"sources":["C:/Users/macie/Desktop/zzpjAutorentClient/src/components/LoginForm.js"],"names":["React","Component","InputField","SubmitButton","UserStore","axios","Link","LoginForm","constructor","props","state","name","password","buttonDisabled","error","setInputValue","property","val","trim","lenght","setState","resetForm","doLogin","post","then","response","login","data","permission_level","token","history","push","alert","catch","console","log","message","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport InputField from './InputField'\nimport SubmitButton from './SubmitButton'\nimport UserStore from './Stores/UserStore'\nimport axios from 'axios';\nimport {Link} from 'react-router-dom'\n\nexport class LoginForm extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: '',\n            password: '',\n            buttonDisabled: false,\n            error: ''\n        }\n    }\n    setInputValue(property, val) {\n        val = val.trim();\n        if (val.lenght > 12) {\n            return;\n        }\n        this.setState({\n            [property]: val\n        })\n    }\n    resetForm() {\n        this.setState({\n            name: '',\n            password: '',\n            buttonDisabled: false\n        })\n    }\n    async doLogin() {\n        if (!this.state.name){\n            return;\n        }\n        if (!this.state.password){\n            return\n        }\n        this.setState({\n            buttonDisabled:true\n        })\n        axios.post('https://autorentserver.azurewebsites.net/api/auth/sign-in', {\n            name: this.state.name,\n            password: this.state.password\n          })\n          .then((response) => {\n              UserStore.login(response.data.permission_level, response.data.token);\n              this.props.history.push('/');\n              alert('Zalogowano pomyślnie!');\n          })\n          .catch(function (error) {\n            console.log(error.message);\n            alert('Nie udało się zalogować.');\n          });\n          this.resetForm();\n    }\n    render() {\n        return (\n            <React.Fragment>\n            <div className=\"loginForm\">\n            \n            <div className='login-label'>Log in</div>\n            <InputField\n                type='text'\n                placeholder='Username'\n                value={this.state.name ? this.state.name : ''}\n                onChange={ (val) => this.setInputValue('name', val)}\n            />\n            <InputField\n                type='password'\n                placeholder='Haslo'\n                value={this.state.password ? this.state.password : ''}\n                onChange={ (val) => this.setInputValue('password', val)}\n            />\n            <SubmitButton\n                text={'Zaloguj sie'}\n                disabled={this.state.buttonDisabled}\n                onClick={ () => this.doLogin()}/>\n            <div>{this.state.error}</div>\n\n            <div>{this.state.error}</div>\n                <Link to=\"/register\" className=\"nav-link\">\n                    <div className=\"login-swap\">Nie posiadam konta.</div>\n                </Link>\n            </div>\n            </React.Fragment>\n        )\n    }\n}\n\nexport default LoginForm\n"]},"metadata":{},"sourceType":"module"}